\name{vopr}{ベクトル演算を行う}{数値演算}

\begin{synopsis}
\item[vopr]
[ --l $L$ ] [ --n $N$ ] [ --i ] [ --a ] [ --s ] [ --m ] [ --d ] [ {\em file1} ] [ {\em infile} ]
\end{synopsis}

\begin{qsection}{DESCRIPTION}
入力データに対しベクトル演算を行います．
つまり，
\begin{description}
\itemb{\em file1}
被演算ベクトルファイル(省略時はstdin)
\itemb{\em infile}
演算ベクトルファイル(省略時はstdin)
\end{description}
として演算ベクトル{\bf a}、被演算ベクトル{\bf b} を読み込み，
オプションで指定された演算を行い結果を標準出力に出力します．
\par
データ形式は入力，出力ともfloat 形式です．
\par
指定ファイル数とベクトルの長さの
組み合わせにより動作が異なります．
\par
ファイルを2個指定した場合（{\em file1} としてstdin を想定した場合，
つまり{\bf --i} オプションなしで{\em infile} だけ指定した場合も含みます）には，
ベクトルの長さの値により次のような動作をします．
\begin{description}
\item{$L=1$ のとき}~\\
\begin{tabular}{l|c|c|c|c|c} \cline{2-6}
{\em file1} (stdin)	& {$a_1$} & {$a_2$} & {\dots}
			& {$a_i$} & {\dots} \\ \cline{2-6}
\multicolumn{6}{c}{}	\\[-10pt] \cline{2-6}
{\em infile}		& {$b_1$} & {$b_2$} & {\dots}
			& {$b_i$} & {\dots} \\ \cline{2-6}
\multicolumn{6}{c}{}	\\[-10pt] \cline{2-6}
{\em Output} (stdout)	& {$y_1$} & {$y_2$} & {\dots}
			& {$y_i$} & {\dots} \\ \cline{2-6}
\end{tabular}
\par
各ファイルのデータが1 対1 に対応します．
\item{$L\geq 2$ のとき}~\\
\begin{tabular}{l|c|c|c|l} \cline{2-5}
{\em file1} (stdin)	& {$a_{11}$,\dots,$a_{1L}$}
			& {$a_{21}$,\dots,$a_{2L}$}
			& {$a_{31}$,\dots,$a_{3L}$}
			& {$a_{41}$,\dots} \\ \cline{2-5}
\multicolumn{5}{c}{}	\\[-10pt]
			\cline{2-2}
{\em infile}		& {$b_{1}$,\dots,$b_{L}$}
			& \multicolumn{3}{c}{} \\ \cline{2-2}
\multicolumn{5}{c}{}	\\[-10pt]
			\cline{2-5}			
{\em Output} (stdout)	& {$y_{11}$,\dots,$y_{1L}$}
			& {$y_{21}$,\dots,$y_{2L}$}
			& {$y_{31}$,\dots,$y_{3L}$}
			& {$y_{41}$,\dots} \\ \cline{2-5}
\end{tabular}
\par
演算ベクトルは{\em infile}から1回だけ読み込まれ，
繰り返し被演算ベクトルに対して作用します．
\end{description}
\par
ファイルを1 個だけ指定した場合（つまり，ファイル名をひとつだけ記述し，
{\bf --i} オプションにより{\em infile=file1} と指定した場合，
またファイルをひとつも記述せず{\em file1=infile=stdin} と指定した場合）には，
ベクトルの長さによらず次のような動作をします．
\begin{description}
\item{$L\geq 1$ のとき}~\\
\begin{tabular}{l|c|c|c|c|l} \cline{2-6}
{\em file} (stdin)	& {$a_{11}$,\dots,$a_{1L}$}
			& {$b_{11}$,\dots,$b_{1L}$}
			& {$a_{21}$,\dots,$a_{2L}$}
			& {$b_{21}$,\dots,$b_{2L}$}
			& ~~~ \\ \cline{2-6}
%			& {$a_{31}$,\dots} \\ \cline{2-6}
\multicolumn{6}{c}{}	\\[-10pt]
			\cline{2-2} \cline{4-4} \cline{6-6}
{\em Output} (stdout)	& {$y_{11}$,\dots,$y_{1L}$} &
			& {$y_{21}$,\dots,$y_{2L}$} &
			& ~~~ \\
%			& {$y_{31}$,\dots} \\
			\cline{2-2} \cline{4-4} \cline{6-6}
\end{tabular}
\par
演算ベクトル，被演算ベクトルとも
同じファイルから読み込まれます．
\end{description}
\end{qsection}

\begin{options}
	\argm{l}{L}{ベクトルの長さ．}{1}
	\argm{n}{N}{ベクトルの次数．}{L-1}
	\argm{i}{}{ファイルを1個しか指定しなかった場合，そのファイルを
			被演算ベクトルと演算ベクトルの両方を含んだ
			ファイルとみなす．}{FALSE}
	\argm{a}{}{加算．$y_i=a_i+b_i$．}{FALSE}
	\argm{s}{}{減算．$y_i=a_i-b_i$．}{FALSE}
	\argm{m}{}{乗算．$y_i=a_i*b_i$．}{FALSE}
	\argm{d}{}{除算．$y_i=a_i/b_i$．}{FALSE}
%\itemb{--i}
%ファイルを1個しか指定しなかった場合，
%そのファイルが被演算ベクトルであることを示します．
%デフォルトでは演算ベクトル．

\end{options}

\begin{qsection}{EXAMPLE}
float形式のファイル{\em data.a} とファイル{\em data.b} の和を
ファイル{\em data.c} に出力する:
\begin{quote}
  \verb!vopr -a data.a data.b > data.c !
\end{quote}
\par
ファイル{\em data.w} に入っている適当な窓( 窓長256) を用いて，
正弦波に窓かけを行う．
\begin{quote}
  \verb!sin -t 30 -l 1000 | vopr data.w -l 256 -m | fdrw | xgr!
\end{quote}
これは，ファイル{\em data.w} にブラックマン窓が入っていたとすれば，
\begin{quote}
  \verb!sin -t 30 -l 1000 | window | fdrw | xgr!
\end{quote}
に等価です．
\end{qsection}

\begin{qsection}{SEE ALSO}
  sopr, vsum
\end{qsection}
