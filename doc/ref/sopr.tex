% ----------------------------------------------------------------
%       Speech Signal Processing Toolkit (SPTK): version 3.0
%                      SPTK Working Group
% 
%                Department of Computer Science
%                Nagoya Institute of Technology
%                             and
%   Interdisciplinary Graduate School of Science and Engineering
%                Tokyo Institute of Technology
%                   Copyright (c) 1984-2000
%                     All Rights Reserved.
% 
% Permission is hereby granted, free of charge, to use and
% distribute this software and its documentation without
% restriction, including without limitation the rights to use,
% copy, modify, merge, publish, distribute, sublicense, and/or
% sell copies of this work, and to permit persons to whom this
% work is furnished to do so, subject to the following conditions:
% 
%   1. The code must retain the above copyright notice, this list
%      of conditions and the following disclaimer.
% 
%   2. Any modifications must be clearly marked as such.
%                                                                        
% NAGOYA INSTITUTE OF TECHNOLOGY, TOKYO INSITITUTE OF TECHNOLOGY,
% SPTK WORKING GROUP, AND THE CONTRIBUTORS TO THIS WORK DISCLAIM
% ALL WARRANTIES WITH REGARD TO THIS SOFTWARE, INCLUDING ALL
% IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS, IN NO EVENT
% SHALL NAGOYA INSTITUTE OF TECHNOLOGY, TOKYO INSITITUTE OF
% TECHNOLOGY, SPTK WORKING GROUP, NOR THE CONTRIBUTORS BE LIABLE
% FOR ANY SPECIAL, INDIRECT OR CONSEQUENTIAL DAMAGES OR ANY
% DAMAGES WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS,
% WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS
% ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
% PERFORMANCE OF THIS SOFTWARE.
% ----------------------------------------------------------------
%
\name{sopr}{スカラ演算を行う}{数値演算}

\begin{synopsis}
\item[sopr]   [ --a $A$ ] [ --s $S$ ] [ --m $M$ ] [ --d $D$ ] [ --ABS ] [ --INV ]
\item[\ ~~~~]  [ --P ] [ --R ] [ --SQRT ] [ --LN ] [ --LOG10 ] [ --EXP ] [ --POW10 ] 
\item[\ ~~~~] [ --FIX ] [ --UNIT ] [ --CLIP ] [ --SIN ] [ --COS ] [ --TAN ] 
\item[\ ~~~~] [ --ATAN ] [ --r m$n$ ] [ --w m$n$ ] [ {\em infile} ]
\end{synopsis}

\begin{qsection}{DESCRIPTION}
指定されたファイルから入力$x$ を読み込み，
指定された演算の実行結果を標準出力に出力します．
{\em infile} の指定がないときには，標準入力からデータが読み込まれます．
\par
データ形式は入力，出力ともfloat 形式です．
\par
演算は与えられた順番に実行します．
\end{qsection}

\begin{options}
	\argm{a}{A}{加算．$y=x+A$．}{FALSE}
	\argm{s}{S}{減算．$y=x-S$．}{FALSE}
	\argm{m}{M}{乗算．$y=x\ast M$．}{FALSE}
	\argm{d}{D}{除算．$y=x/D$．}{FALSE}
	\desc[1zh]{演算オプションの引数として
		``{\em dB}''を指定すると $20/\log_e10$ の値が設定されます．
		また，同様に``{\em pi}''を指定すると $\pi$ の値が設定され，
                ``{\em ln2}''，``{\em exp10}''，``{\em sqrt30}''というよう
                に，特定の関数の引数に任意の数字を書いても，
                それを計算して定数とします．}
	\argm[1zh]{ABS}{}{絶対値．$y=|x|$．}{FALSE}
	\argm{INV}{}{逆数．$y=1/x$．}{FALSE}
	\argm{P}{}{二乗．$y=x^2$．}{FALSE}
	\argm{R}{}{平方根．$y=\sqrt{x}$．}{FALSE}
	\argm{SQRT}{}{平方根．$y=\sqrt{x}$．}{FALSE}
	\argm{LN}{}{自然対数．$y=\log{x}$．}{FALSE}
	\argm{LOG10}{}{常用対数．$y=\log_{10}{x}$．}{FALSE}
	\argm{EXP}{}{指数．$y=\exp{x}$．}{FALSE}
	\argm{POW10}{}{10のべき乗．$y=10^x$．}{FALSE}
	\argm{FIX}{}{小数点以下の切捨て．$(int)x$．}{FALSE}
	\argm{CLIP}{}{クリッピング．$x \ast u(x)$}{FALSE}
	\argm{UNIT}{}{ユニットステップ．$u(x)$}{FALSE}
	\argm{SIN}{}{正弦．$y=\sin(x)$}{FALSE}
	\argm{COS}{}{余弦．$y=\cos(x)$}{FALSE}
	\argm{TAN}{}{正接．$y=\tan(x)$}{FALSE}
	\argm{ATAN}{}{逆正接．$y=\atan(x)$}{FALSE}
        \argm{r}{\mbox{m}n}{メモリレジスタm$n$からの読み込み$(n=0..9)$}{}
        \argm{m}{\mbox{m}n}{メモリレジスタm$n$への書き込み$(n=0..9)$}{}
\end{options}

\begin{qsection}{EXAMPLE}
ランプ関数($0,1,2,\ldots$) を2 倍($0,2,4,\ldots$) してから，
$1$ を足して($1,3,5,\ldots$) 出力する:
\begin{quote}
  \verb!ramp | sopr -m 2 -a 1 | dmp!
\end{quote}
\par
foat形式のファイル{\em data.f1} のデータとfloat形式のファイル{\em data.f2}
のデータの平均をファイル{\em data.avrg} に出力する:
\begin{quote}
  \verb!vopr -a data.f1 data.f2 | sopr -d 2 > data.avrg!
\end{quote}
\par
float形式のファイル {\em data.f} からデータを読み込み，
dB 単位に変換した結果を出力する:
\begin{quote}
  \verb!sopr data.f -L -m dB | dmp!
\end{quote}
この例は，
\begin{quote}
  \verb!sopr data.f -LOG10 -m 20 | dmp!
\end{quote}
としても結果は同じです．
\par
メモリレジスタを使い
\[
y = (1 + 3x + 4x^2) / (1 + 2x + 5x^2) 
\]
を計算する：
\begin{quote}
\verb!sopr data.f -w m0 -m 5 -a 2 -m m0 -a 1 -w m1 \!\\
\verb!       -r m0 -m 4 -a 3 -m m0 -a 1 -d m1 | dmp!
\end{quote}
ここでm0, m1はメモリレジスタで，m0からm9まで使えます．
-wはメモリレジスタへの書き出し，
-rはメモリレジスタから現在の演算レジスタへの読み込みを行います．
\end{qsection}

\begin{qsection}{SEE ALSO}
  vopr, vsum
\end{qsection}
