% ----------------------------------------------------------------
%       Speech Signal Processing Toolkit (SPTK): version 3.0
%                      SPTK Working Group
% 
%                Department of Computer Science
%                Nagoya Institute of Technology
%                             and
%   Interdisciplinary Graduate School of Science and Engineering
%                Tokyo Institute of Technology
%                   Copyright (c) 1984-2000
%                     All Rights Reserved.
% 
% Permission is hereby granted, free of charge, to use and
% distribute this software and its documentation without
% restriction, including without limitation the rights to use,
% copy, modify, merge, publish, distribute, sublicense, and/or
% sell copies of this work, and to permit persons to whom this
% work is furnished to do so, subject to the following conditions:
% 
%   1. The code must retain the above copyright notice, this list
%      of conditions and the following disclaimer.
% 
%   2. Any modifications must be clearly marked as such.
%                                                                        
% NAGOYA INSTITUTE OF TECHNOLOGY, TOKYO INSITITUTE OF TECHNOLOGY,
% SPTK WORKING GROUP, AND THE CONTRIBUTORS TO THIS WORK DISCLAIM
% ALL WARRANTIES WITH REGARD TO THIS SOFTWARE, INCLUDING ALL
% IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS, IN NO EVENT
% SHALL NAGOYA INSTITUTE OF TECHNOLOGY, TOKYO INSITITUTE OF
% TECHNOLOGY, SPTK WORKING GROUP, NOR THE CONTRIBUTORS BE LIABLE
% FOR ANY SPECIAL, INDIRECT OR CONSEQUENTIAL DAMAGES OR ANY
% DAMAGES WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS,
% WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS
% ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
% PERFORMANCE OF THIS SOFTWARE.
% ----------------------------------------------------------------
%
\name{mgc2mgc}{frequency and generalized cepstral transformation}%
{speech parameter transformation}

\begin{synopsis}
 \item [mgc2mgc] [ --m $M_1$ ] [ --a $A_1$ ] [ --g $G_1$ ] [ --n ] [ --u ]
 \item [\ ~~~~~~~~~~~] [ --M $M_2$ ] [ --A $A_2$ ] [ --G $G_2$ ] [ --N ] [ --U ] [ {\em infile} ] 
\end{synopsis}

\begin{qsection}{DESCRIPTION}
{\em mgc} transforms generalized mel-cepstrum coefficients
$c_{\alpha_1,\gamma_1}(0),\ldots,c_{\alpha_1,\gamma_1}(M_1)$
from {\em infile} (or standard input) 
into different sets of generalized mel-cepstrum coefficients
$c_{\alpha_2,\gamma_2}(0),\ldots,c_{\alpha_2,\gamma_2}(M_2)$
sending the result to standard output.

$\alpha$ characterizes the frequency-warping transform,
while $\gamma$ characterizes the generalized log magnitude transform.

Input and output data are in float format.

Firstly, a frequency transformation ( $\alpha_1 \rightarrow \alpha_2$ )
is undertaken in the input generalized mel-cepstrum
coefficients $c_{\alpha_1,\gamma_1}(m)$,
and $c_{\alpha_2,\gamma_1}(m)$ is calculated as follows.
\begin{eqnarray*} 
\hspace{-15mm}&& \alpha = (\alpha_2-\alpha_1)/(1-\alpha_1\alpha_2) \\
\hspace{-15mm}&& c_{\alpha_2,\gamma_1}^{(i)}(m) = \left\{ 
	\begin{array}{ll}
          c_{\alpha_1,\gamma_1}(-i)
	    +\alpha\,c_{\alpha_2,\gamma_1}^{(i-1)}(0), &  m=0 \\
          (1-\alpha^2)\,c_{\alpha_2,\gamma_1}^{(i-1)}(0)
            +\alpha\,c_{\alpha_2,\gamma_1}^{(i-1)}(1), &  m=1 \\
          c_{\alpha_2,\gamma_1}^{(i-1)}(m-1) 
	    +\alpha\, \left(c_{\alpha_2,\gamma_1}^{(i-1)}(m)
	    -c_{\alpha_2,\gamma_1}^{(i)}(m-1)\right), &   m=2,\ldots,M_2
         \end{array} \right\}, \quad \nonumber \\
\hspace{-15mm}&& \hspace{80mm} i = -M_1,\ldots,-1,0 
\end{eqnarray*}

Then the gain is normalized and $c_{\alpha_2,\gamma_1}'(m)$ 
is evaluated.
\begin{eqnarray*}
\hspace{-15mm}&&K_{\alpha_2} = 
	s_{\gamma_1}^{-1}\left(c_{\alpha_2,\gamma_1}^{(0)}(0)\right), 
	  \qquad\qquad \\ 
\hspace{-15mm}&&c_{\alpha_2,\gamma_1}'(m) =
          c_{\alpha_2,\gamma_1}^{(0)}(m)/\left(1+\gamma_1\,
	  c_{\alpha_2,\gamma_1}^{(0)}(0)\right), \quad m = 1,2,\ldots, M_2 
\end{eqnarray*}

Afterwards, $c_{\alpha_2,\gamma_1}'(m)$ is transformed into 
$c_{\alpha_2,\gamma_2}'(m)$ through a generalized log transformation
( $\gamma_1 \rightarrow \gamma_2$ ).?????????????????????????????
\begin{eqnarray*}
\hspace{-15mm}&&c_{\alpha_2,\gamma_2}'(m) =
        c_{\alpha_2,\gamma_1}'(m)+\sum_{k=1}^{m-1} \frac{k}{m}
          \left( \gamma_2\,c_{\alpha_2,\gamma_1}(k)\,
	  c_{\alpha_2,\gamma_2}'(m-k) \right. \nonumber \\
\hspace{-15mm}&& \hspace{30mm} \left. -\gamma_1\,c_{\alpha_2,\gamma_2}(k)\,
          c_{\alpha_2,\gamma_1}'(m-k) \right), 
	  \quad m = 1, 2, \ldots, M_2 
\end{eqnarray*}

Finally, the gain is inverse normalized and $c_{\alpha_2,\gamma_2}(m)$
is calculated.
\begin{eqnarray*}
\hspace{-15mm}&&c_{\alpha_2,\gamma_2}(0)= 
	s_{\gamma_2}\left(K_{\alpha_2}\right), \qquad \qquad \\
\hspace{-15mm}&&c_{\alpha_2,\gamma_2}(m) =
          c_{\alpha_2,\gamma_2}'(m)\,\left(1+\gamma_2\, 
          c_{\alpha_2,\gamma_2}(0)\right), 
          \quad m = 1,2,\ldots, M_2
\end{eqnarray*}

In case we represent input and output with $\gamma$,
if the coefficients $c_{\alpha,\gamma}(m)$ are not normalized, then
the following representation is assumed
\begin{displaymath}
1+\gamma c_{\alpha,\gamma}(0), \gamma c_{\alpha,\gamma}(1), \ldots, \gamma c_{\alpha,\gamma}(M),
\end{displaymath}
if they are normalized, then
the following representation is assumed
\begin{displaymath}
K_\alpha,\gamma c_{\alpha,\gamma}'(1),\ldots, \gamma c_{\alpha,\gamma}'(M).
\end{displaymath}

\end{qsection}

\begin{options}
	\argm{m}{M_1}{order of mel-generalized cepstrum (input)}{25}
	\argm{a}{A_1}{alpha of mel-generalized cepstrum (input)}{0}
	\argm{g}{G_1}{gamma of mel-generalized cepstrum (input)\\
			if $G_1 > 1.0$ then $\gamma_1 = -1 / G_1$.}{0}
	\argm{n}{}{regard input as normalized mel-generalized cepstrum}{FALSE}
	\argm{u}{}{regard input as multiplied by gamma}{FALSE}
	\argm{M}{M_2}{order of mel-generalized cepstrum (output)}{25}
	\argm{A}{A_2}{alpha of mel-generalized cepstrum (output)}{0}
	\argm{G}{G_2}{gamma of mel-generalized cepstrum (output)
			if $G_2 > 1.0$ then $\gamma_2 =-1 / G_2$.}{1}
	\argm{N}{}{regard output as normalized mel-generalized cepstrum}{FALSE}
	\argm{U}{}{regard input as multiplied by gamma}{FALSE}
\end{options}

\begin{qsection}{EXAMPLE}
In the example below, 12 order LPC coefficients are read in
float format from {\em data.lpc}, 30 order mel-cepstrum
coefficients are calculated and written to {\em data.mcep}:
\begin{quote}
 \verb!mgc2mgc -m 12 -a 0 -g -1 -M 30 -A 0.31 -G 0!\\
 \verb!                     < data.lpc > data.mcep!
\end{quote} 
\end{qsection}

\begin{qsection}{SEE ALSO}
 uels, gcep, mcep, mgcep, gc2gc, freqt, lpc2c
\end{qsection}
