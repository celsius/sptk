\name[ref:synHMM-ASJ,ref:synHMM-EUROSPEECH95]{mlpg}%
{obtain parameter sequence from PDF sequence}{parameter generation}

\def\bmath#1{\mbox{\boldmath{$#1$}}}
\def\bc{\bmath{c}}
\def\bo{\bmath{o}}
\def\bC{\bmath{C}}
\def\bO{\bmath{O}}
\def\bU{\bmath{U}}
\def\bmu{\bmath{\mu}}

\begin{synopsis}
	\item [mlpg] [ --l $L$ ] [ --m $M$ ] 
		[--d ($fn$ $|$ $d_0$ [$d_1$ $\ldots$]) ]
		[--r $N_R$ $W_1$ [$W_2$] ]
	\item [\ ~~~~] [ --i $I$ ] [ --s $S$ ] [ {\em infile} ] 
\end{synopsis}

\begin{qsection}{DESCRIPTION}
        The {\em mlpg} command reads the means and diagonal covariances
        of Gaussian distributions from the assigned file {\em infile}
        such as
 \begin{eqnarray}
	&& \ldots, \mu_t(0), \ldots, \mu_t(M),
		\mu^{(1)}_t(0), \ldots, \mu^{(1)}_t(M),
		\ldots, \mu^{(N)}_t(M),
		\nonumber\\
	&& ~~~~~~\sigma^2_t(0), \ldots, \sigma^2_t(M),
		{\sigma^{(1)}}^2_t(0), \ldots, {\sigma^{(1)}}^2_t(M),
		\ldots, {\sigma^{(N)}}^2_t(M),
		\ldots \nonumber
 \end{eqnarray}
        and evaluates the maximum likelihood parameters
        sending them to the standard output.

	Input and output data are in float format.

	フレーム $t$ における音声パラメータベクトル $\bo_t$ が，
	静的特徴ベクトル
 \begin{displaymath}
	\bc_t = [c_t(0), c_t(1), \ldots, c_t(M)]'
 \end{displaymath}
	とその動的特徴ベクトル
	\ $\Delta^{(1)}\bc_t, \ldots, \Delta^{(N)}\bc_t$ からなる，
	つまり
 \begin{displaymath}
	\bo_t = [\bc_t', \Delta^{(1)}\bc_t', \ldots, \Delta^{(N)}\bc_t']'
 \end{displaymath}
	とします．
	ここで，
	動的特徴ベクトル $\Delta^{(n)}\bc_t$ は
	静的特徴ベクトルと次式で関係づけられています．
 \begin{displaymath}
	\Delta^{(n)}\bc_t 
	= \sum_{\tau=-L^{(n)}}^{L^{(n)}} w^{(n)}(\tau)\bc_{t+\tau}
 \end{displaymath}
	この条件の下で，
	与えられた分布列
	$\left((\bmu_1, \bU_1), (\bmu_2, \bU_2), \ldots, (\bmu_T, \bU_T)
	\right)$，
	ただし
 \begin{eqnarray}
	\bmu_t 
	& = & [\bmu^{\prime(0)}_t, \bmu^{\prime(1)}_t, 
		\ldots, \bmu^{\prime(N)}_t]'
		\nonumber\\
	\bU_t 
	& = & \mbox{diag}[\bU^{(0)}_t, \bU^{(1)}_t, \ldots, \bU^{(1)}_t]
		\nonumber
 \end{eqnarray}
	に対して最も尤度の高いパラメータ列
	\ $(\bo_1, \bo_2, \ldots, \bo_T)$
	\ を求め，
	得られたパラメータベクトル $\bo_t$ のうちの
	静的特徴ベクトル $\bc_t$ の列
	\ $(\bc_1, \bc_2, \ldots, \bc_T)$
	\ を出力します．
	ここで，
	$\bmu^{(0)}, \bU^{(0)}$ は静的特徴ベクトルに対する
	平均ベクトルと共分散行列，
	$\bmu^{(n)}, \bU^{(n)}$ は $n$ 次の動的特徴ベクトルに対する
	平均ベクトルと共分散行列です．
\end{qsection}

\begin{options}
	\argm{l}{L}{パラメータの長さ．}{26}
	\argm{m}{M}{パラメータの次数．パラメータの長さは$M+1$になります．}{$L-1$}
	\argm{d}{(fn~|~d_0~[d_1~\ldots])}{$fn$ は
		デルタパラメータを計算する際の
		係数のファイル(float 形式)のファイル名．
		係数は左右の長さが同じであると仮定しているため，
		左右の長さが異なる場合は短い方に 0 を加える必要がある．
		例えば，
	 \begin{displaymath}
		w(-1), w(0), w(1), w(2), w(3)
	 \end{displaymath}
		という係数を用いる場合は，左側に 0 を加え，
	 \begin{displaymath}
		0, 0, w(-1), w(0), w(1), w(2), w(3)
	 \end{displaymath}
		とする．
		ファイル名 $fn$ を指定する代わりに
		係数(ファイル $fn$ の内容)を
		直接コマンドラインに書いても良い．
		複数のデルタパラメータを用いる場合は繰り返し指定する．\\
		--r オプションとの併用は不可．}{N/A}
	\argm{r}{N_R~W_1~[W_2]}{
		デルタパラメータとして $N_R$ 次までの回帰係数を使用する
		($N_R = 1$ または $2$)．
		$W_1$，$W_2$ は一次または二次の回帰係数を求める
		際の(片側の)幅を表す．
		時刻 $t$ における一次回帰係数 $\Delta\bc_t$ は，
	 \begin{displaymath}
		\Delta\bc_t
		= \frac{\sum_{\tau=-W_1}^{W_1}\tau \bc_{t+\tau}}%
			{\sum_{\tau=-W_1}^{W_1}\tau^2}
	 \end{displaymath}
		二次回帰係数 $\Delta^2\bc_t$ は，
		$a_2 = \sum_{\tau=-W_2}^{W_2} \tau^4$，
		$a_1 = \sum_{\tau=-W_2}^{W_2} \tau^2$，
		$a_0 = \sum_{\tau=-W_2}^{W_2} 1$ として
	 \begin{displaymath}
		\Delta^2\bc_t
		= \frac{\sum_{\tau=-W_2}^{W_2}
				(a_0\tau^2 - a_1) \bc_{t+\tau}}
			{2(a_2a_0-a_1^2)}
	 \end{displaymath}
		により計算される．\\
		--d オプションとの併用は不可．}{N/A}
	\argm{i}{I}{入力のタイプを指定．\\
	  \begin{tabular}{l@{\hspace{2\tabcolsep}$($}l@{ }l@{$)$}}
		$I = 0$ & $\bmu,$         & $\bU$ \\
		$I = 1$ & $\bmu,$         & $\bU^{-1}$ \\
		$I = 2$ & $\bmu\bU^{-1},$ & $\bU^{-1}$ \\[1zh]
	  \end{tabular}
		}{0}
	\argm{s}{S}{あるフレームのパラメータが影響を及ぼすフレームの範囲．}{30}
\end{options}

\begin{qsection}{EXAMPLE}
	パラメータの次数が 15，
	窓幅 1 の一次および二次の回帰係数を用いる場合に，
	分布列からパラメータ列を求める．
 \begin{quote}
	\verb!mlpg -m 15 -r 2 1 1 data.pdf > data.par!
 \end{quote}
	または，
 \begin{quote}
	\verb!echo "-0.5 0 0.5" | x2x +af > delta! \\
	\verb!echo "0.25 -0.5 0.25" | x2x +af > accel! \\
	\verb!mlpg -m 15 -d delta -d accel data.pdf > data.par!
 \end{quote}
\end{qsection}

%\begin{qsection}{SEE ALSO}
%\end{qsection}
