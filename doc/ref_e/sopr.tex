%  ---------------------------------------------------------------  %
%            Speech Signal Processing Toolkit (SPTK)                %
%                      SPTK Working Group                           %
%                                                                   %
%                  Department of Computer Science                   %
%                  Nagoya Institute of Technology                   %
%                               and                                 %
%   Interdisciplinary Graduate School of Science and Engineering    %
%                  Tokyo Institute of Technology                    %
%                                                                   %
%                     Copyright (c) 1984-2007                       %
%                       All Rights Reserved.                        %
%                                                                   %
%  Permission is hereby granted, free of charge, to use and         %
%  distribute this software and its documentation without           %
%  restriction, including without limitation the rights to use,     %
%  copy, modify, merge, publish, distribute, sublicense, and/or     %
%  sell copies of this work, and to permit persons to whom this     %
%  work is furnished to do so, subject to the following conditions: %
%                                                                   %
%    1. The source code must retain the above copyright notice,     %
%       this list of conditions and the following disclaimer.       %
%                                                                   %
%    2. Any modifications to the source code must be clearly        %
%       marked as such.                                             %
%                                                                   %
%    3. Redistributions in binary form must reproduce the above     %
%       copyright notice, this list of conditions and the           %
%       following disclaimer in the documentation and/or other      %
%       materials provided with the distribution.  Otherwise, one   %
%       must contact the SPTK working group.                        %
%                                                                   %
%  NAGOYA INSTITUTE OF TECHNOLOGY, TOKYO INSTITUTE OF TECHNOLOGY,   %
%  SPTK WORKING GROUP, AND THE CONTRIBUTORS TO THIS WORK DISCLAIM   %
%  ALL WARRANTIES WITH REGARD TO THIS SOFTWARE, INCLUDING ALL       %
%  IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS, IN NO EVENT   %
%  SHALL NAGOYA INSTITUTE OF TECHNOLOGY, TOKYO INSTITUTE OF         %
%  TECHNOLOGY, SPTK WORKING GROUP, NOR THE CONTRIBUTORS BE LIABLE   %
%  FOR ANY SPECIAL, INDIRECT OR CONSEQUENTIAL DAMAGES OR ANY        %
%  DAMAGES WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS,  %
%  WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTUOUS   %
%  ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR          %
%  PERFORMANCE OF THIS SOFTWARE.                                    %
%                                                                   %
%  ---------------------------------------------------------------  %
%
\hypertarget{sopr}{}
\name{sopr}{execute scalar operations}{number operation}

\begin{synopsis}
\item[sopr]   [ --a $A$ ] [ --s $S$ ] [ --m $M$ ] [ --d $D$ ] [ --ABS ] [ --INV ]
\item[\ ~~~~]  [ --P ] [ --R ] [ --SQRT ] [ --LN ] [ --LOG10 ] [ --EXP ] [ --POW10 ] 
\item[\ ~~~~] [ --FIX ] [ --UNIT ] [ --CLIP ] [ --SIN ] [ --COS ] [ --TAN ] 
\item[\ ~~~~] [ --ATAN ] [ --r m$n$ ] [ --w m$n$ ] [ {\em infile} ]
\end{synopsis}

\begin{qsection}{DESCRIPTION}
{\em sopr} performs a sequence of scalar operations on float data 
from {\em infile} (or standard input), 
sending the float output data to standard output.

The sequence of operations is specified by command line options
and is performed in the given order.
\end{qsection}

\begin{options}
	\argm{a}{A}{addition $y=x+A$}{FALSE}
	\argm{s}{S}{subtraction $y=x-S$}{FALSE}
	\argm{m}{M}{multiplication $y=x\ast M$}{FALSE}
	\argm{d}{D}{division $y=x/D$}{FALSE}
	\desc[1ex]{If the argument of the operation option is
                ``{\em dB}'' then the value $20/\log_e10$
                is assigned.
		Also similarly, if ``{\em pi}'' is written after
                the operation option, then its value will be used.
                Actuary expression such as ``{\em ln2}'',
                ``{\em exp10}'', ``{\em sqrt30}'' can also be
                used as arguments.}
	\argm[1ex]{ABS}{}{absolute $y=|x|$}{FALSE}
	\argm{INV}{}{inverse $y=1/x$}{FALSE}
	\argm{P}{}{square $y=x^2$}{FALSE}
	\argm{R}{}{square root $y=\sqrt{x}$}{FALSE}
	\argm{SQRT}{}{square root $y=\sqrt{x}$}{FALSE}
	\argm{LN}{}{logarithm $y=\log{x}$}{FALSE}
	\argm{LOG10}{}{logarithm $y=\log_{10}{x}$}{FALSE}
	\argm{EXP}{}{exponential $y=\exp{x}$}{FALSE}
	\argm{POW10}{}{power of 10 $y=10^x$}{FALSE}
	\argm{FIX}{}{round $(int)x$}{FALSE}
	\argm{UNIT}{}{unit step $u(x)$}{FALSE}
	\argm{CLIP}{}{clipping $x \ast u(x)$}{FALSE}
	\argm{SIN}{}{sin $y=\sin(x)$}{FALSE}
	\argm{COS}{}{cos $y=\cos(x)$}{FALSE}
	\argm{TAN}{}{tan $y=\tan(x)$}{FALSE}
	\argm{ATAN}{}{atan $y=\atan(x)$}{FALSE}

        \argm{r}{\mbox{m}n}{read from memory register m$n$ $(n=0..9)$}{}
        \argm{w}{\mbox{m}n}{write from memory register m$n$ $(n=0..9)$}{}
\end{options}

\begin{qsection}{EXAMPLE}
In the following example, a ramp function ($0,1,2,\ldots$)
is multiplied by 2 ($0,2,4,\ldots$)
and then 1 is added ($1,3,5,\ldots$):
\begin{quote}
  \verb!ramp | sopr -m 2 -a 1 | dmp!
\end{quote}
\par
The output file {\em data.avrg} contains the average taken from
data in files {\em data.f1} and {\em data.f2} read in float format:
\begin{quote}
  \verb!vopr -a data.f1 data.f2 | sopr -d 2 > data.avrg!
\end{quote}
\par
Data is read in float format from {\em data.f},
and the results in dB is written to the output:
\begin{quote}
  \verb!sopr data.f -LN -m dB | dmp!
\end{quote}
The following example gives the same results:
\begin{quote}
  \verb!sopr data.f -LOG10 -m 20 | dmp!
\end{quote}
\par
If we want to evaluate the following equation,
\[
y = (1 + 3x + 4x^2) / (1 + 2x + 5x^2) 
\]
then memory registers can be used as follows.
\begin{quote}
\verb!sopr data.f -w m0 -m 5 -a 2 -m m0 -a 1 -w m1 \!\\
\verb!       -r m0 -m 4 -a 3 -m m0 -a 1 -d m1 | dmp!
\end{quote}
In the example above, m0 and m1 are memory registers.
Registers from m0 to m9 can be used.
The --w option is used to write into memory register,
while the --r option is used to read from a register.
\end{qsection}

\begin{qsection}{SEE ALSO}
\hyperlink{vopr}{vopr},
\hyperlink{vsum}{vsum}
\end{qsection}
